
<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>Web Apps</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/dist/reset.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/dist/reveal.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/dist/theme/simple.css" id="theme">
        <link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/a11y-dark.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
		<style>
			.reveal {
				font-family: "Work Sans", sans-serif;
			}

			.reveal .slides section {
				text-align: left;
				font-size: smaller;
			}

			.reveal pre {
				background-color: #f5f5f5;
				width: 100%;
				border: 1px solid #ccc;
				border-radius: 4px;
				box-shadow: none;
			}

            .reveal section li {
                margin-bottom: 12px;
            }

			.reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5, .reveal h6 {
				font-family: "Roboto", sans-serif;
				color: #0072c1;
			}

			.reveal section.heading-only {
				text-align:center;
				padding-top:10%;
			}

            .no-code-badge .code-badge {
                display: none;
            }

            .code-badge-language {
                display: none;
            }

			.python-tutor-link {
				font-size: smaller;
			}

			.python-tutor-link:before {
				content: "";
				display: block;
				background: url("http://pythontutor.com/favicon.ico") no-repeat;
				width: 48px;
				height: 48px;
				float: left;
				margin: 0 6px 0 0;
			}

			.reveal h3 {
				margin-bottom: 40px;
			}

            .smaller {
                font-size: smaller;
            }

            code {
                padding: 2px 4px;
                font-size: 90%;
                color: #0072c1;
                background-color: #f9f2f4;
                border-radius: 4px;
            }

            p.padded {
                margin-top: 32px;
            }

            section .row {
                display: flex;
            }

            section .column {
                flex: 48%;
                margin: 10px;
            }

			@media print
			{
				.no-print, .no-print *
				{
					display: none !important;
				}
			}

		</style>
	</head>
    <body>
    <div class="reveal">
        <div class="slides">

            <section class="heading-only" style="padding-top:5%">
                <h1>Web Apps</h1>
                <h2 style="font-size: 60px;">tinyurl.com/web-apps-workshop</h2>
                <div class="no-print" style="text-align: left; margin-top: 100px; font-size: 70%;">
                    Tips for navigating the slides:
                    <ul>
                        <li>Press O or Escape for overview mode.</li>
                        <li>Visit <a href="?print-pdf" target="_blank">this link</a> for a nice printable version</li>
                        <li>Press the copy icon on the upper right of code blocks to copy the code</li>
                    </ul>
                </div>

                <aside class="speaker-notes">
                </aside>
            </section>


            <section>
                <h3>We'll talk about...</h3>

                <img src="../media/BIT_PUBLIC_SPEAKING.svg" alt="Bit (the raccoon) lecturing" width="300" style="float:right;">
                <ul style="margin-top:20px; font-size:44px; line-height: 2em;">
                    <li>How the web works
                    <li>Python for web apps
                    <li>Hosting web apps
                </ul>
            </section>

            <section class="heading-only">
                <h2>How the web works</h2>
                <img src="../media/BIT_DEV.svg" alt="Bit (the raccoon) in front of monitors with browsers and analytics" width="400">

            </section>

            <section>
                <h3>Clients and servers</h3>

                <img src="client_server_HTTP.png" alt="Diagram of browser sending HTTP request to server and receiving HTTP response"/>
            </section>

            <section>
                <h3 style="font-size:48px;">HTTP</h3>

                <p>A client sends an HTTP request:</p>

                <pre style="font-size:0.7em; margin-top: 0px;"><code data-trim data-noescape class="text">
                GET /index.html HTTP/1.1
                Host: www.example.com
                </code></pre>

                <p>The server sends back an HTTP response:</p>
                <pre style="font-size:0.7em; margin-top: 0px;"><code data-trim data-noescape class="html">
                HTTP/1.1 200 OK
                Content-Type: text/html; charset=UTF-8
                Content-Length: 208
                &lt;!DOCTYPE html&gt;
                    &lt;html&gt;
                    &lt;head&gt;
                        &lt;title&gt;Example Domain&lt;/title&gt;
                    &lt;/head&gt;
                    &lt;body&gt;
                    &lt;h1&gt;Example Domain&lt;/h1&gt;
                    &lt;p&gt;This domain is to be used for illustrative examples in documents.&lt;/p&gt;
                    &lt;/body&gt;
                &lt;/html&gt;
                </code></pre>
            </section>

            <section>
                <h3>Webpages</h3>

                <p>Webpages are made up of three languages:</p>

                <ul>
                    <li><strong>HTML</strong>: Contains the content and uses tags to 
                        break it into semantic chunks (headings, paragraphs, etc)</li>
                    <li><strong>CSS</strong>: Contains style rules that apply
                        properties to elements on a page.</li>
                    <li><strong>JavaScript</strong>: Contains code that dynamically
                        accesses and updates the page content to make it more interactive.</li>
                </ul>
            </section>

            <section>
                <h3>What does a server do?</h3>

                <p>The most basic server just serves up HTML and multimedia files
                    from a file system.
                </p>

                <p>Server-side code is also useful for anything that requires access
                    to persistent data or needs an additional layer of security than
                    allowed in the client.</p>
                
                <ul>
                    <li>User authentication
                    <li>Database fetches/updates
                    <li>Caching
                </ul>
            </section>

            <section class="heading-only">
                <h2>Server-side Python</h2>

                <img src="../media/BIT_PYTHON.svg" alt="Bit (the raccoon) in front of a computer and Python logo" width="400">

            </section>

            <section>
                <h3>Simple HTTP server</h3>

                <p>The <a target="_blank" href="https://docs.python.org/3/library/http.server.html">http module</a>
                    in the Python standard library can run a basic server.
                </p>
                <br>
                <p>‚ö†Ô∏è It is <strong>not</strong> recommended for production.</p>
                <br>
                <p>It's handy for learning and local development, however...</p>
            </section>

            <section>
                <h3>Example: Simple file server</h3>

                <p>A file server serves up files and folders according to their path in the file system.
                    Also known as a static server.</p>

                <p class="padded">Run a file server from any folder:</p>

                <pre style="font-size:0.8em; margin-top: 0px;"><code data-trim data-noescape class="shell">
                python3 -m http.server 8080
                </code></pre>

                

            </section>

            <section>
                <h3>Example: Simple dynamic server</h3>

                <!--<p>üëÄ Demo: <a  target="_blank" href="https://tinyurl.com/python-simple-server">tinyurl.com/python-simple-server</a></p>-->

                <p  class="padded">üë©üèº‚Äçüíª Repo: <a  target="_blank" class="smaller" href="https://github.com/pamelafox/python-simple-server-example/">github.com/pamelafox/python-simple-server-example/</a></p>

                <p class="padded">The server code is in <a target="_blank" href="https://github.com/pamelafox/python-simple-server-example/blob/main/server.py">server.py</a>.
                Uses the <code>http</code> module to dynamically generate responses.
                </p>
                
                <p class="padded">Run the server:</p>
                <pre style="font-size:0.8em; margin-top: 0px;"><code data-trim data-noescape class="shell">
                python3 server.py
                </code></pre>
            </section>

            <section>
                <h3>Flask framework</h3>

                <p><a target="_blank" href="https://flask.palletsprojects.com/en/2.0.x/">Flask</a>, an external package,
                    is a lightweight framework for server requests and responses.</p>

                <p>Apps written in Flask:</p>
                <ul>
                    <li>Khan Academy (originally)
                    <li>Reddit
                    <li>Netflix
                </ul>
            </section>

            <section>
                <h3>Example: Simple Flask website</h3>

                <p>üëÄ Demo: <a  target="_blank" href="https://tinyurl.com/simple-flask-website">tinyurl.com/simple-flask-website</a></p>

                <p  class="padded">üë©üèº‚Äçüíª Repo: <a  target="_blank" class="smaller" href="https://github.com/pamelafox/simple-flask-server-example/">github.com/pamelafox/simple-flask-server-example/</a></p>
                
                <p>Most of the server code is in <a target="_blank" href="https://github.com/pamelafox/simple-flask-server-example/blob/main/app.py">app.py</a>.
                    Uses Flask to generate responses for each route
                </p>
                
                <p class="padded">Run the server:</p>
                <pre style="font-size:0.8em; margin-top: 0px;"><code data-trim data-noescape class="shell">
                python3 app.py
                </code></pre>

            </section>

            <section>
                <h3>Exercise: Flask Templating</h3>

                <p>Using this repo:<br>
                    <a  target="_blank" class="smaller" href="https://github.com/pamelafox/simple-flask-server-example/">github.com/pamelafox/simple-flask-server-example/</a>
                </p>
                <ol>
                    <li>Follow the readme steps to get the app running.
                    <li>Add a new route for "/about" that uses a new "about.html" template.
                    <li>Check the new route works.
                    <li>Learn about <a target="_blank" href="https://flask.palletsprojects.com/en/1.1.x/patterns/templateinheritance/">template inheritance</a>,
                        then refactor all the templates to extend a base template instead.
                    <li>Change the 404 handler to render a template as well.
                </ol>
                <p>üôãüèº‚Äç‚ôÄÔ∏èüôãüèæ‚Äç‚ôÄÔ∏èüôãüèΩ‚Äç‚ôÄÔ∏è Let us know if you need any help! üôãüèª‚Äç‚ôÄÔ∏èüôãüèΩ‚Äç‚ôÇÔ∏èüôãüèø‚Äç‚ôÄÔ∏è</p>
            </section>

            <section class="heading-only">
                <h2>Adding databases</h2>
            </section>

            <section>
                <h3>Webapps with Databases</h3>

                <p>Web apps store data in databases that needs to be shared across multiple users/computers. </p>
                
                <img src="app_with_sql.png" alt="Diagram using SQL to update and query a database storing data for a web application"/>
            </section>


            <section>
                <h3>Example: Flask Quiz</h3>

                <p>üëÄ Demo: <a  target="_blank" href="https://tinyurl.com/python-flask-quiz">tinyurl.com/python-flask-quiz</a></p>

                <p  class="padded">üë©üèº‚Äçüíª Repo: <a  target="_blank" href="https://github.com/pamelafox/flask-db-quiz-example/">github.com/pamelafox/flask-db-quiz-example/</a></p>

                <p>Most of the server code is in <a target="_blank" href="https://github.com/pamelafox/flask-db-quiz-example/blob/main/app.py">app.py</a>. Uses <a target="_blank" href="https://www.sqlalchemy.org/">SQLAlchemy</a> for database interaction.
                </p>
                
                <p class="padded">Run the server:</p>
                <pre style="font-size:0.8em; margin-top: 0px;"><code data-trim data-noescape class="shell">
                python3 app.py
                </code></pre>

            </section>

            <section>
                <h3>Django framework</h3>

                <p><a target="_blank" href="https://www.djangoproject.com/">Django</a>, an external library, is a fairly "opinionated"
                    framework for server-side code. Includes an ORM for database interaction.</p>
                
                <p>Apps written in Django:</p>
                <ul>
                    <li>Coursera (originally, now Scala+Play)
                    <li>Instagram
                    <li>Pinterest (originally, now Flask)
                    <li>Eventbrite
                </ul>
            </section>


            <section>
                <h3>Example: Django Quiz</h3>

                <p>üëÄ Demo: <a  target="_blank" href="https://tinyurl.com/python-django-quiz">tinyurl.com/python-django-quiz</a></p>

                <p  class="padded">üë©üèº‚Äçüíª Repo: <a  target="_blank" href="https://github.com/pamelafox/django-quiz-app/">github.com/pamelafox/django-quiz-app/</a></p>

                <p class="padded">Important server files:<br>
                    <a target="_blank" href="https://github.com/pamelafox/django-quiz-app/blob/main/quizzes/models.py">models.py</a>
                    , <a target="_blank" href="https://github.com/pamelafox/django-quiz-app/blob/main/quizzes/urls.py">urls.py</a>
                    , <a target="_blank" href="https://github.com/pamelafox/django-quiz-app/blob/main/quizzes/views.py">views.py</a>
                    , <a target="_blank" href="https://github.com/pamelafox/django-quiz-app/blob/main/quizzes/admin.py">admin.py</a>
                </p>
                
                <p class="padded">Run DB migrations and server:</p>
                <pre style="font-size:0.8em; margin-top: 0px;"><code data-trim data-noescape class="shell">
                python manage.py migrate
                python manage.py runserver
                </code></pre>

            </section>

            <section>
                <h3>Exercise: Django app</h3>

                <p>Using this repo:<br>
                    <a  target="_blank" href="https://github.com/pamelafox/django-quiz-app/">github.com/pamelafox/django-quiz-app/</a></p>

                <ol>
                    <li>Follow the readme steps to get the app running.
                    <li>Follow the readme steps to get into the Django admin.
                    <li>Add a new quiz using the Django admin.
                    <li>Add a new question using the Django admin.
                    <li>Add a new route that shows a list of all questions.<br>
                        (Hint: Look at the route that lists the quizzes.)
                </ol>
                <p>üôãüèº‚Äç‚ôÄÔ∏èüôãüèæ‚Äç‚ôÄÔ∏èüôãüèΩ‚Äç‚ôÄÔ∏è Let us know if you need any help! üôãüèª‚Äç‚ôÄÔ∏èüôãüèΩ‚Äç‚ôÇÔ∏èüôãüèø‚Äç‚ôÄÔ∏è</p>
            </section>

            <section class="heading-only">
                <h2>Hosting web apps</h2>
                <img src="../media/BIT_AZURE.png" alt="Bit (the raccoon) on a cloud with the Azure logo" width="400">

            </section>

            <section>
                <h3>Hosting options</h3>

                <p>When your website is <strong>hosted</strong> on a server,
                    it means other users on the Internet can access it.
                </p>

                <p>Many possible hosts:
                <ul>
                    <li>A rented computer in a data center
                    <li>A virtual machine
                    <li>A PaaS (platform as a service)
                    </ul>

                <p>Consider:
                <ul>
                    <li>How much control do you want?
                    <li>How much do you enjoy administering systems?
                    <li>Do you need it to scale up/out?
                </ul>
            </section>

            <section>
                <h3>Azure hosting options</h3>
                
                <style>
                table.deploy-stack {
                    border-spacing: 30px; 
                    border-collapse: separate;
                    border: 0px;
                }

                table.deploy-stack th, table.deploy-stack td {
                    font-size: 20px;
                    border-bottom: 0px none;
                    border-radius: 12px;
                    text-align: center;
                    vertical-align: middle;
                    padding: 8px;
                }
                </style>
                <table class="deploy-stack">
                    <tr>
                        <th>
                        <td>
                        <td style="background-color: #00bc70; color: white;">Azure Container Apps
                        <td>
                        <td style="background-color: #00bc70; color: white;">Azure Functions
                    </tr> 
                    <tr>
                        <th>
                        <td style="background-color: #00bc70; color: white;">Azure Kubernetes Service
                        <td style="background-color: #0070c0; color: white;">Container Management
                        <td style="background-color: #00bc70; color: white;">Azure App Service
                        <td style="background-color: #0070c0; color: white;">Serverless
                        
                    </tr>
                    <tr>
                        <th>Environment
                        <td colspan="2" style="background-color:#0070c0; color: white;">Containers
                        <td colspan="2" style="background-color:#0070c0; color: white;">PaaS
                    </tr>
                    <tr>
                        <th>Cloud
                        <td colspan="4" style="background-color:#ccc;">Azure
                    </tr>
                </table>
                <p class="fragment smaller">For Flask/Django, <span style="background-color: #00bc70; color: white; padding-left: 8px; padding-right: 8px; border-radius: 8px;">App Service</span> is easiest way to get started.</p>
            </section>

            <section>
                <h3>But wait, there's more!</h3>

                <table>
                    <tr>
                        <th>Databases
                        <td>PostGreSQL, MySQL, CosmosDB, ...
                    <tr>
                        <th>Storage
                        <td>Blob Storage, Files, Archive Storage, ...
                    <tr>
                        <th>Networking
                        <td>DNS Zone, Virtual Network, VPN Gateway, ...
                    <tr>
                        <th>Caching
                        <td>CDN, Front Door, ...
                    <tr>
                        <th>Security
                        <td>Key Vault, Security Center, ...
                    <tr>
                        <th>Machine Learning
                        <td>Translator, Bot Service, Computer Vision, ...
                    <tr>
                        <th colspan="2">...and more!
                </table>

            </section>

            <section>
                <h3>Hosting the Flask quiz on Azure</h3>

                <p>
                <img src="flaskdb.drawio.png" alt="Flask app architecture diagram: App Service, App Service Plan, PostGreSQL server, Log Analytics workspace">
                </p>

                <p>Using the <a target="_blank" href=https://learn.microsoft.com/en-us/azure/developer/azure-developer-cli/overview?WT.mc_id=python-79461-pamelafox">Azure Dev CLI</a>:</p>
                <pre style="font-size:0.8em; margin-top: 0px;"><code data-trim data-noescape class="shell">
                azd up
                </code></pre>
            </section>

            <section>
                <h3>Hosting the Django quiz on Azure</h3>

                <p>
                <img src="djangodb.drawio.png" alt="Flask app architecture diagram: App Service, App Service Plan, PostGreSQL server, Log Analytics workspace, Virtual network, DNS Zone">
                </p>

                <p>Using the <a target="_blank" href=https://learn.microsoft.com/en-us/azure/developer/azure-developer-cli/overview?WT.mc_id=python-79461-pamelafox">Azure Dev CLI</a>:</p>
                <pre style="font-size:0.8em; margin-top: 0px;"><code data-trim data-noescape class="shell">
                azd up
                </code></pre>
            </section>

            <section>
                <h3>Exercise: Deploying an app</h3>

                <ol>
                    <li>Sign up for a <a target="_blank" href="https://azure.microsoft.com/en-in/free/">free Azure account</a>
                    <li>Either open one of the previous projects in Codespaces 
                        or follow <a target="_blank" href="https://learn.microsoft.com/en-us/azure/developer/azure-developer-cli/install-azd?WT.mc_id=python-81211-pamelafox">these installation steps for the Azure Developer CLI.</a>
                    <li>Run <code>azd up</code>. If prompted, login to your Azure account.
                    <li>If it deploys successfully, share the endpoint URL with your classmates.
                        If not, let us know what error you get. ü™≤
                    <li>Once you've verified the app is working, run <code> azd down</code> to un-deploy the app (so that you don't waste cloud resources unnecessarily).
                </ol>
            </section>

            <section>
                <h3>More Azure resources</h3>

                <img src="../media/BIT_COWORKING.png" alt="Raccoons with laptops" width="35%" style="float:right;">

                <ul style="float:left; width: 60%; display: grid; gap: 18px;">
                    <li><a target="_blank" href="https://learn.microsoft.com/en-us/azure/app-service/quickstart-python?WT.mc_id=python-81211-pamelafox">Deploy a Python (Django or Flask) web app to Azure App Service</a>
                    <li><a target="_blank" href="https://learn.microsoft.com/en-us/azure/app-service/tutorial-python-postgresql-app?WT.mc_id=python-81211-pamelafox">Deploy a Python (Django or Flask) web app with PostgreSQL in Azure</a>
                    <li><a target="_blank" href="https://learn.microsoft.com/en-us/azure/developer/python/quickstarts-app-hosting?WT.mc_id=python-81211-pamelafox">Hosting Python apps on Azure</a>
                    <li><a target="_blank" href="https://code.visualstudio.com/docs/python/python-tutorial">Getting Started with Python in VS Code</a>
                    <li><a target="_blank" href="https://aka.ms/python-discord">MS Python Discord: aka.ms/python-discord</a>
                </ul>
            </section>

            <section class="heading-only">
                <h2>Any questions?</h2>
                <img src="../media/BIT_STUDENTS.svg" alt="A bunch of raccoon students with computers" width="400">
            </section>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlightjs-badge@0.1.9/highlightjs-badge.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js-menu@2.1.0/menu.js"></script>
    <script>
        const srcUrlPrefix = "https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/";
        Reveal.initialize({
            hash: true,
            center: false,
            slideNumber: true,
            showNotes: false,
            margin: 0.1,
            preloadIframes: true,
            plugins: [ RevealHighlight, RevealMenu ],
            pdfSeparateFragments: true
        });

        // add HighlightJS-badge (options are optional)
        var options = {
            copyIconContent: "üìÑ",
            checkIconContent: "‚úÖ"
        };
        window.highlightJsBadge();

        if (window.location.search == "?print-pdf") {
            var uncounted = document.querySelectorAll("[data-visibility='uncounted']");
            uncounted.forEach(node => {
                node.parentNode.classList.add("no-print")
            })
        }
    </script>
    </body>
</html>